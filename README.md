# Шаблон сервера на Golang

Данный шаблон можно использовать как заготовку для сервера на Go. 
Он включает в себя как заготовку для RestAPI, так и для GraphQL.

### Немного о структуре
 - `.run` - конфигурация для запуска в IDE
 - `cmd` - там находится main
 - `docs` - там лежит страничка с Apollo Sandbox (доступна по пути /docs/sandbox)
 - `internal`
    * `models` - общие модели и константы
    * `modules` - модули приложения, в т.ч. `domain` - модуль со всей бизнес-логикой
    * `pkg` - пакеты, которые используются в приложении
    * `utils` - вспомогательные функции
 - `tests` - функциональные тесты

### Немного о библиотеках
 - `.ent` в качестве ORM
 - `uber-fx` для "инъекции" зависимостей
 - `gqlgen` как GraphQL фреймворк
 - `echo` как HTTP фреймворк

Для регистрации роутов необходимо использовать интерфейс routers.Router (файл [router.go](./internal%2Fpkg%2Frouters%2Frouter.go)).
Он позволяет использовать т.н. "сахарные" обработчики, т.е. обработчики, 
которые принимают и возвращают типизированные структуры. 
Несколько примеров допустимых видов обработчиков можно найти в файле [echo_router.go](./internal%2Fpkg%2Frouters%2Fecho_router.go).

### Немного про запуск проекта
Для запуска необходимых контейнеров (пока только postgres) в процессе разработки удобнее всего использовать [docker-compose.dev.yml](docker-compose.dev.yml).

Для запуска приложения со всеми зависимостями - [docker-compose.yml](docker-compose.yml).
При запуске приложения будет использоваться конфигурация из файла [.env](.env)

___

P.S. Да, я очень люблю кодогенерацию.